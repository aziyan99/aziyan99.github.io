!function(){var e,f,g,d,b,c,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,a=function(c){var b=new a.Builder;return b.pipeline.add(a.trimmer,a.stopWordFilter,a.stemmer),b.searchPipeline.add(a.stemmer),c.call(b,b),b.build()};a.version="2.3.9",/*!
 * lunr.utils
 * Copyright (C) 2020 Oliver Nightingale
 */ a.utils={},a.utils.warn=(e=this,function(a){e.console&&console.warn&&console.warn(a)}),a.utils.asString=function(a){return null==a?"":a.toString()},a.utils.clone=function(b){if(null==b)return b;for(var c=Object.create(null),f=Object.keys(b),d=0;d<f.length;d++){var e=f[d],a=b[e];if(Array.isArray(a)){c[e]=a.slice();continue}if("string"==typeof a||"number"==typeof a||"boolean"==typeof a){c[e]=a;continue}throw new TypeError("clone is not deep and does not support nested objects")}return c},a.FieldRef=function(a,b,c){this.docRef=a,this.fieldName=b,this._stringValue=c},a.FieldRef.joiner="/",a.FieldRef.fromString=function(b){var c=b.indexOf(a.FieldRef.joiner);if(-1===c)throw"malformed field ref string";var d=b.slice(0,c),e=b.slice(c+1);return new a.FieldRef(e,d,b)},a.FieldRef.prototype.toString=function(){return void 0==this._stringValue&&(this._stringValue=this.fieldName+a.FieldRef.joiner+this.docRef),this._stringValue},/*!
 * lunr.Set
 * Copyright (C) 2020 Oliver Nightingale
 */ a.Set=function(a){if(this.elements=Object.create(null),a){this.length=a.length;for(var b=0;b<this.length;b++)this.elements[a[b]]=!0}else this.length=0},a.Set.complete={intersect:function(a){return a},union:function(){return this},contains:function(){return!0}},a.Set.empty={intersect:function(){return this},union:function(a){return a},contains:function(){return!1}},a.Set.prototype.contains=function(a){return!!this.elements[a]},a.Set.prototype.intersect=function(b){var c,d,e,g=[];if(b===a.Set.complete)return this;if(b===a.Set.empty)return b;this.length<b.length?(c=this,d=b):(c=b,d=this),e=Object.keys(c.elements);for(var f=0;f<e.length;f++){var h=e[f];h in d.elements&&g.push(h)}return new a.Set(g)},a.Set.prototype.union=function(b){return b===a.Set.complete?a.Set.complete:b===a.Set.empty?this:new a.Set(Object.keys(this.elements).concat(Object.keys(b.elements)))},a.idf=function(b,d){var a=0;for(var c in b)"_index"!=c&&(a+=Object.keys(b[c]).length);return Math.log(1+Math.abs((d-a+.5)/(a+.5)))},a.Token=function(a,b){this.str=a||"",this.metadata=b||{}},a.Token.prototype.toString=function(){return this.str},a.Token.prototype.update=function(a){return this.str=a(this.str,this.metadata),this},a.Token.prototype.clone=function(b){return b=b||function(a){return a},new a.Token(b(this.str,this.metadata),this.metadata)},/*!
 * lunr.tokenizer
 * Copyright (C) 2020 Oliver Nightingale
 */ a.tokenizer=function(c,j){if(null==c|| void 0==c)return[];if(Array.isArray(c))return c.map(function(b){return new a.Token(a.utils.asString(b).toLowerCase(),a.utils.clone(j))});for(var e=c.toString().toLowerCase(),h=e.length,f=[],b=0,d=0;b<=h;b++){var k=e.charAt(b),i=b-d;if(k.match(a.tokenizer.separator)||b==h){if(i>0){var g=a.utils.clone(j)||{};g.position=[d,i],g.index=f.length,f.push(new a.Token(e.slice(d,b),g))}d=b+1}}return f},a.tokenizer.separator=/[\s\-]+/,/*!
 * lunr.Pipeline
 * Copyright (C) 2020 Oliver Nightingale
 */ a.Pipeline=function(){this._stack=[]},a.Pipeline.registeredFunctions=Object.create(null),a.Pipeline.registerFunction=function(b,c){c in this.registeredFunctions&&a.utils.warn("Overwriting existing registered function: "+c),b.label=c,a.Pipeline.registeredFunctions[b.label]=b},a.Pipeline.warnIfFunctionNotRegistered=function(b){b.label&&b.label in this.registeredFunctions||a.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",b)},a.Pipeline.load=function(b){var c=new a.Pipeline;return b.forEach(function(b){var d=a.Pipeline.registeredFunctions[b];if(d)c.add(d);else throw new Error("Cannot load unregistered function: "+b)}),c},a.Pipeline.prototype.add=function(){var b=Array.prototype.slice.call(arguments);b.forEach(function(b){a.Pipeline.warnIfFunctionNotRegistered(b),this._stack.push(b)},this)},a.Pipeline.prototype.after=function(d,c){a.Pipeline.warnIfFunctionNotRegistered(c);var b=this._stack.indexOf(d);if(-1==b)throw new Error("Cannot find existingFn");b+=1,this._stack.splice(b,0,c)},a.Pipeline.prototype.before=function(d,b){a.Pipeline.warnIfFunctionNotRegistered(b);var c=this._stack.indexOf(d);if(-1==c)throw new Error("Cannot find existingFn");this._stack.splice(c,0,b)},a.Pipeline.prototype.remove=function(b){var a=this._stack.indexOf(b);-1!=a&&this._stack.splice(a,1)},a.Pipeline.prototype.run=function(b){for(var g=this._stack.length,d=0;d<g;d++){for(var h=this._stack[d],e=[],c=0;c<b.length;c++){var a=h(b[c],c,b);if(null!=a&&""!==a){if(Array.isArray(a))for(var f=0;f<a.length;f++)e.push(a[f]);else e.push(a)}}b=e}return b},a.Pipeline.prototype.runString=function(b,c){var d=new a.Token(b,c);return this.run([d]).map(function(a){return a.toString()})},a.Pipeline.prototype.reset=function(){this._stack=[]},a.Pipeline.prototype.toJSON=function(){return this._stack.map(function(b){return a.Pipeline.warnIfFunctionNotRegistered(b),b.label})},/*!
 * lunr.Vector
 * Copyright (C) 2020 Oliver Nightingale
 */ a.Vector=function(a){this._magnitude=0,this.elements=a||[]},a.Vector.prototype.positionForIndex=function(c){if(0==this.elements.length)return 0;for(var d=0,f=this.elements.length/2,e=f-d,a=Math.floor(e/2),b=this.elements[2*a];e>1&&(b<c&&(d=a),b>c&&(f=a),b!=c);)e=f-d,a=d+Math.floor(e/2),b=this.elements[2*a];return b==c||b>c?2*a:b<c?(a+1)*2:void 0},a.Vector.prototype.insert=function(a,b){this.upsert(a,b,function(){throw"duplicate index"})},a.Vector.prototype.upsert=function(b,c,d){this._magnitude=0;var a=this.positionForIndex(b);this.elements[a]==b?this.elements[a+1]=d(this.elements[a+1],c):this.elements.splice(a,0,b,c)},a.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var b=0,d=this.elements.length,a=1;a<d;a+=2){var c=this.elements[a];b+=c*c}return this._magnitude=Math.sqrt(b)},a.Vector.prototype.dot=function(h){for(var g=0,c=this.elements,d=h.elements,i=c.length,j=d.length,e=0,f=0,a=0,b=0;a<i&&b<j;)(e=c[a])<(f=d[b])?a+=2:e>f?b+=2:e==f&&(g+=c[a+1]*d[b+1],a+=2,b+=2);return g},a.Vector.prototype.similarity=function(a){return this.dot(a)/this.magnitude()||0},a.Vector.prototype.toArray=function(){for(var b=new Array(this.elements.length/2),a=1,c=0;a<this.elements.length;a+=2,c++)b[c]=this.elements[a];return b},a.Vector.prototype.toJSON=function(){return this.elements},/*!
 * lunr.stemmer
 * Copyright (C) 2020 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */ a.stemmer=(f={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},g={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},b="[^aeiou][^aeiouy]*",c=(d="[aeiouy]")+"[aeiou]*",h=new RegExp("^("+b+")?"+c+b),i=new RegExp("^("+b+")?"+c+b+c+b),j=new RegExp("^("+b+")?"+c+b+"("+c+")?$"),k=new RegExp("^("+b+")?"+d),l=/^(.+?)(ss|i)es$/,m=/^(.+?)([^s])s$/,n=/^(.+?)eed$/,o=/^(.+?)(ed|ing)$/,p=/.$/,q=/(at|bl|iz)$/,r=new RegExp("([^aeiouylsz])\\1$"),s=new RegExp("^"+b+d+"[^aeiouwxy]$"),t=/^(.+?[^aeiou])y$/,u=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,v=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,w=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,x=/^(.+?)(s|t)(ion)$/,y=/^(.+?)e$/,z=/ll$/,A=new RegExp("^"+b+d+"[^aeiouwxy]$"),B=function(a){var c,B,C,b,e,D,E;if(a.length<3)return a;if("y"==(C=a.substr(0,1))&&(a=C.toUpperCase()+a.substr(1)),b=l,e=m,b.test(a)?a=a.replace(b,"$1$2"):e.test(a)&&(a=a.replace(e,"$1$2")),b=n,e=o,b.test(a)){var d=b.exec(a);(b=h).test(d[1])&&(b=p,a=a.replace(b,""))}else if(e.test(a)){var d=e.exec(a);c=d[1],(e=k).test(c)&&(a=c,e=q,D=r,E=s,e.test(a)?a+="e":D.test(a)?(b=p,a=a.replace(b,"")):E.test(a)&&(a+="e"))}if((b=t).test(a)){var d=b.exec(a);a=(c=d[1])+"i"}if((b=u).test(a)){var d=b.exec(a);c=d[1],B=d[2],b=h,b.test(c)&&(a=c+f[B])}if((b=v).test(a)){var d=b.exec(a);c=d[1],B=d[2],b=h,b.test(c)&&(a=c+g[B])}if(b=w,e=x,b.test(a)){var d=b.exec(a);c=d[1],(b=i).test(c)&&(a=c)}else if(e.test(a)){var d=e.exec(a);c=d[1]+d[2],(e=i).test(c)&&(a=c)}if((b=y).test(a)){var d=b.exec(a);c=d[1],b=i,e=j,D=A,(b.test(c)||e.test(c)&&!D.test(c))&&(a=c)}return b=z,e=i,b.test(a)&&e.test(a)&&(b=p,a=a.replace(b,"")),"y"==C&&(a=C.toLowerCase()+a.substr(1)),a},function(a){return a.update(B)}),a.Pipeline.registerFunction(a.stemmer,"stemmer"),/*!
 * lunr.stopWordFilter
 * Copyright (C) 2020 Oliver Nightingale
 */ a.generateStopWordFilter=function(a){var b=a.reduce(function(a,b){return a[b]=b,a},{});return function(a){if(a&&b[a.toString()]!==a.toString())return a}},a.stopWordFilter=a.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),a.Pipeline.registerFunction(a.stopWordFilter,"stopWordFilter"),/*!
 * lunr.trimmer
 * Copyright (C) 2020 Oliver Nightingale
 */ a.trimmer=function(a){return a.update(function(a){return a.replace(/^\W+/,"").replace(/\W+$/,"")})},a.Pipeline.registerFunction(a.trimmer,"trimmer"),/*!
 * lunr.TokenSet
 * Copyright (C) 2020 Oliver Nightingale
 */ a.TokenSet=function(){this.final=!1,this.edges={},this.id=a.TokenSet._nextId,a.TokenSet._nextId+=1},a.TokenSet._nextId=1,a.TokenSet.fromArray=function(d){for(var b=new a.TokenSet.Builder,c=0,e=d.length;c<e;c++)b.insert(d[c]);return b.finish(),b.root},a.TokenSet.fromClause=function(b){return"editDistance"in b?a.TokenSet.fromFuzzyString(b.term,b.editDistance):a.TokenSet.fromString(b.term)},a.TokenSet.fromFuzzyString=function(k,l){for(var j=new a.TokenSet,c=[{node:j,editsRemaining:l,str:k}];c.length;){var b=c.pop();if(b.str.length>0){var d,h=b.str.charAt(0);h in b.node.edges?d=b.node.edges[h]:(d=new a.TokenSet,b.node.edges[h]=d),1==b.str.length&&(d.final=!0),c.push({node:d,editsRemaining:b.editsRemaining,str:b.str.slice(1)})}if(0!=b.editsRemaining){if("*"in b.node.edges)var f=b.node.edges["*"];else{var f=new a.TokenSet;b.node.edges["*"]=f}if(0==b.str.length&&(f.final=!0),c.push({node:f,editsRemaining:b.editsRemaining-1,str:b.str}),b.str.length>1&&c.push({node:b.node,editsRemaining:b.editsRemaining-1,str:b.str.slice(1)}),1==b.str.length&&(b.node.final=!0),b.str.length>=1){if("*"in b.node.edges)var g=b.node.edges["*"];else{var g=new a.TokenSet;b.node.edges["*"]=g}1==b.str.length&&(g.final=!0),c.push({node:g,editsRemaining:b.editsRemaining-1,str:b.str.slice(1)})}if(b.str.length>1){var e,m=b.str.charAt(0),i=b.str.charAt(1);i in b.node.edges?e=b.node.edges[i]:(e=new a.TokenSet,b.node.edges[i]=e),1==b.str.length&&(e.final=!0),c.push({node:e,editsRemaining:b.editsRemaining-1,str:m+b.str.slice(2)})}}}return j},a.TokenSet.fromString=function(f){for(var b=new a.TokenSet,i=b,c=0,g=f.length;c<g;c++){var d=f[c],h=c==g-1;if("*"==d)b.edges[d]=b,b.final=h;else{var e=new a.TokenSet;e.final=h,b.edges[d]=e,b=e}}return i},a.TokenSet.prototype.toArray=function(){for(var d=[],b=[{prefix:"",node:this}];b.length;){var a=b.pop(),e=Object.keys(a.node.edges),g=e.length;a.node.final&&(a.prefix.charAt(0),d.push(a.prefix));for(var c=0;c<g;c++){var f=e[c];b.push({prefix:a.prefix.concat(f),node:a.node.edges[f]})}}return d},a.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var a=this.final?"1":"0",c=Object.keys(this.edges).sort(),e=c.length,b=0;b<e;b++){var d=c[b],f=this.edges[d];a=a+d+f.id}return a},a.TokenSet.prototype.intersect=function(o){for(var i=new a.TokenSet,b=void 0,e=[{qNode:o,output:i,node:this}];e.length;){b=e.pop();for(var j=Object.keys(b.qNode.edges),p=j.length,k=Object.keys(b.node.edges),q=k.length,f=0;f<p;f++)for(var g=j[f],h=0;h<q;h++){var c=k[h];if(c==g||"*"==g){var l=b.node.edges[c],m=b.qNode.edges[g],n=l.final&&m.final,d=void 0;c in b.output.edges?(d=b.output.edges[c]).final=d.final||n:((d=new a.TokenSet).final=n,b.output.edges[c]=d),e.push({qNode:m,output:d,node:l})}}}return i},a.TokenSet.Builder=function(){this.previousWord="",this.root=new a.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},a.TokenSet.Builder.prototype.insert=function(c){var d,e=0;if(c<this.previousWord)throw new Error("Out of order word insertion");for(var b=0;b<c.length&&b<this.previousWord.length&&c[b]==this.previousWord[b];b++)e++;this.minimize(e),d=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var b=e;b<c.length;b++){var f=new a.TokenSet,g=c[b];d.edges[g]=f,this.uncheckedNodes.push({parent:d,char:g,child:f}),d=f}d.final=!0,this.previousWord=c},a.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},a.TokenSet.Builder.prototype.minimize=function(d){for(var c=this.uncheckedNodes.length-1;c>=d;c--){var a=this.uncheckedNodes[c],b=a.child.toString();b in this.minimizedNodes?a.parent.edges[a.char]=this.minimizedNodes[b]:(a.child._str=b,this.minimizedNodes[b]=a.child),this.uncheckedNodes.pop()}},/*!
 * lunr.Index
 * Copyright (C) 2020 Oliver Nightingale
 */ a.Index=function(a){this.invertedIndex=a.invertedIndex,this.fieldVectors=a.fieldVectors,this.tokenSet=a.tokenSet,this.fields=a.fields,this.pipeline=a.pipeline},a.Index.prototype.search=function(b){return this.query(function(c){new a.QueryParser(b,c).parse()})},a.Index.prototype.query=function(L){for(var j=new a.Query(this.fields),g=Object.create(null),o=Object.create(null),z=Object.create(null),f=Object.create(null),h=Object.create(null),c=0;c<this.fields.length;c++)o[this.fields[c]]=new a.Vector;L.call(j,j);for(var c=0;c<j.clauses.length;c++){var d=j.clauses[c],p=null,q=a.Set.empty;p=d.usePipeline?this.pipeline.runString(d.term,{fields:d.fields}):[d.term];for(var r=0;r<p.length;r++){var M=p[r];d.term=M;var N=a.TokenSet.fromClause(d),s=this.tokenSet.intersect(N).toArray();if(0===s.length&&d.presence===a.Query.presence.REQUIRED){for(var e=0;e<d.fields.length;e++){var b=d.fields[e];f[b]=a.Set.empty}break}for(var t=0;t<s.length;t++)for(var n=s[t],A=this.invertedIndex[n],O=A._index,e=0;e<d.fields.length;e++){var b=d.fields[e],B=A[b],u=Object.keys(B),C=n+"/"+b,D=new a.Set(u);if(d.presence==a.Query.presence.REQUIRED&&(q=q.union(D),void 0===f[b]&&(f[b]=a.Set.complete)),d.presence==a.Query.presence.PROHIBITED){void 0===h[b]&&(h[b]=a.Set.empty),h[b]=h[b].union(D);continue}if(o[b].upsert(O,d.boost,function(a,b){return a+b}),!z[C]){for(var v=0;v<u.length;v++){var E,F=u[v],k=new a.FieldRef(F,b),G=B[F];void 0===(E=g[k])?g[k]=new a.MatchData(n,b,G):E.add(n,b,G)}z[C]=!0}}}if(d.presence===a.Query.presence.REQUIRED)for(var e=0;e<d.fields.length;e++){var b=d.fields[e];f[b]=f[b].intersect(q)}}for(var w=a.Set.complete,x=a.Set.empty,c=0;c<this.fields.length;c++){var b=this.fields[c];f[b]&&(w=w.intersect(f[b])),h[b]&&(x=x.union(h[b]))}var l=Object.keys(g),H=[],I=Object.create(null);if(j.isNegated()){l=Object.keys(this.fieldVectors);for(var c=0;c<l.length;c++){var k=l[c],i=a.FieldRef.fromString(k);g[k]=new a.MatchData}}for(var c=0;c<l.length;c++){var i=a.FieldRef.fromString(l[c]),m=i.docRef;if(!(!w.contains(m)||x.contains(m))){var y,P=this.fieldVectors[i],J=o[i.fieldName].similarity(P);if(void 0!==(y=I[m]))y.score+=J,y.matchData.combine(g[i]);else{var K={ref:m,score:J,matchData:g[i]};I[m]=K,H.push(K)}}}return H.sort(function(a,b){return b.score-a.score})},a.Index.prototype.toJSON=function(){var b=Object.keys(this.invertedIndex).sort().map(function(a){return[a,this.invertedIndex[a]]},this),c=Object.keys(this.fieldVectors).map(function(a){return[a,this.fieldVectors[a].toJSON()]},this);return{version:a.version,fields:this.fields,fieldVectors:c,invertedIndex:b,pipeline:this.pipeline.toJSON()}},a.Index.load=function(c){var d={},g={},h=c.fieldVectors,i=Object.create(null),j=c.invertedIndex,f=new a.TokenSet.Builder,l=a.Pipeline.load(c.pipeline);c.version!=a.version&&a.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+a.version+"' does not match serialized index '"+c.version+"'");for(var b=0;b<h.length;b++){var e=h[b],m=e[0],n=e[1];g[m]=new a.Vector(n)}for(var b=0;b<j.length;b++){var e=j[b],k=e[0],o=e[1];f.insert(k),i[k]=o}return f.finish(),d.fields=c.fields,d.fieldVectors=g,d.invertedIndex=i,d.tokenSet=f.root,d.pipeline=l,new a.Index(d)},/*!
 * lunr.Builder
 * Copyright (C) 2020 Oliver Nightingale
 */ a.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=a.tokenizer,this.pipeline=new a.Pipeline,this.searchPipeline=new a.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},a.Builder.prototype.ref=function(a){this._ref=a},a.Builder.prototype.field=function(a,b){if(/\//.test(a))throw new RangeError("Field '"+a+"' contains illegal character '/'");this._fields[a]=b||{}},a.Builder.prototype.b=function(a){a<0?this._b=0:a>1?this._b=1:this._b=a},a.Builder.prototype.k1=function(a){this._k1=a},a.Builder.prototype.add=function(h,q){var d=h[this._ref],e=Object.keys(this._fields);this._documents[d]=q||{},this.documentCount+=1;for(var i=0;i<e.length;i++){var c=e[i],p=this._fields[c].extractor,r=p?p(h):h[c],s=this.tokenizer(r,{fields:[c]}),j=this.pipeline.run(s),k=new a.FieldRef(d,c),f=Object.create(null);this.fieldTermFrequencies[k]=f,this.fieldLengths[k]=0,this.fieldLengths[k]+=j.length;for(var l=0;l<j.length;l++){var b=j[l];if(void 0==f[b]&&(f[b]=0),f[b]+=1,void 0==this.invertedIndex[b]){var m=Object.create(null);m["_index"]=this.termIndex,this.termIndex+=1;for(var n=0;n<e.length;n++)m[e[n]]=Object.create(null);this.invertedIndex[b]=m}void 0==this.invertedIndex[b][c][d]&&(this.invertedIndex[b][c][d]=Object.create(null));for(var o=0;o<this.metadataWhitelist.length;o++){var g=this.metadataWhitelist[o],t=b.metadata[g];void 0==this.invertedIndex[b][c][d][g]&&(this.invertedIndex[b][c][d][g]=[]),this.invertedIndex[b][c][d][g].push(t)}}}},a.Builder.prototype.calculateAverageFieldLengths=function(){for(var g=Object.keys(this.fieldLengths),j=g.length,c={},e={},b=0;b<j;b++){var h=a.FieldRef.fromString(g[b]),d=h.fieldName;e[d]||(e[d]=0),e[d]+=1,c[d]||(c[d]=0),c[d]+=this.fieldLengths[h]}for(var i=Object.keys(this._fields),b=0;b<i.length;b++){var f=i[b];c[f]=c[f]/e[f]}this.averageFieldLength=c},a.Builder.prototype.createFieldVectors=function(){for(var i={},j=Object.keys(this.fieldTermFrequencies),q=j.length,f=Object.create(null),g=0;g<q;g++){for(var c=a.FieldRef.fromString(j[g]),k=c.fieldName,r=this.fieldLengths[c],l=new a.Vector,m=this.fieldTermFrequencies[c],n=Object.keys(m),s=n.length,t=this._fields[k].boost||1,u=this._documents[c.docRef].boost||1,h=0;h<s;h++){var d,e,o,b=n[h],p=m[b],v=this.invertedIndex[b]._index;void 0===f[b]?(d=a.idf(this.invertedIndex[b],this.documentCount),f[b]=d):d=f[b],e=d*((this._k1+1)*p)/(this._k1*(1-this._b+this._b*(r/this.averageFieldLength[k]))+p),e*=t,e*=u,o=Math.round(1e3*e)/1e3,l.insert(v,o)}i[c]=l}this.fieldVectors=i},a.Builder.prototype.createTokenSet=function(){this.tokenSet=a.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},a.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new a.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},a.Builder.prototype.use=function(b){var a=Array.prototype.slice.call(arguments,1);a.unshift(this),b.apply(this,a)},a.MatchData=function(a,g,c){for(var d=Object.create(null),e=Object.keys(c||{}),b=0;b<e.length;b++){var f=e[b];d[f]=c[f].slice()}this.metadata=Object.create(null),void 0!==a&&(this.metadata[a]=Object.create(null),this.metadata[a][g]=d)},a.MatchData.prototype.combine=function(d){for(var h=Object.keys(d.metadata),e=0;e<h.length;e++){var a=h[e],i=Object.keys(d.metadata[a]);void 0==this.metadata[a]&&(this.metadata[a]=Object.create(null));for(var f=0;f<i.length;f++){var b=i[f],j=Object.keys(d.metadata[a][b]);void 0==this.metadata[a][b]&&(this.metadata[a][b]=Object.create(null));for(var g=0;g<j.length;g++){var c=j[g];void 0==this.metadata[a][b][c]?this.metadata[a][b][c]=d.metadata[a][b][c]:this.metadata[a][b][c]=this.metadata[a][b][c].concat(d.metadata[a][b][c])}}}},a.MatchData.prototype.add=function(a,b,d){if(!(a in this.metadata)){this.metadata[a]=Object.create(null),this.metadata[a][b]=d;return}if(!(b in this.metadata[a])){this.metadata[a][b]=d;return}for(var f=Object.keys(d),e=0;e<f.length;e++){var c=f[e];c in this.metadata[a][b]?this.metadata[a][b][c]=this.metadata[a][b][c].concat(d[c]):this.metadata[a][b][c]=d[c]}},a.Query=function(a){this.clauses=[],this.allFields=a},a.Query.wildcard=new String("*"),a.Query.wildcard.NONE=0,a.Query.wildcard.LEADING=1,a.Query.wildcard.TRAILING=2,a.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},a.Query.prototype.clause=function(b){return"fields"in b||(b.fields=this.allFields),"boost"in b||(b.boost=1),"usePipeline"in b||(b.usePipeline=!0),"wildcard"in b||(b.wildcard=a.Query.wildcard.NONE),b.wildcard&a.Query.wildcard.LEADING&&b.term.charAt(0)!=a.Query.wildcard&&(b.term="*"+b.term),b.wildcard&a.Query.wildcard.TRAILING&&b.term.slice(-1)!=a.Query.wildcard&&(b.term=""+b.term+"*"),"presence"in b||(b.presence=a.Query.presence.OPTIONAL),this.clauses.push(b),this},a.Query.prototype.isNegated=function(){for(var b=0;b<this.clauses.length;b++)if(this.clauses[b].presence!=a.Query.presence.PROHIBITED)return!1;return!0},a.Query.prototype.term=function(b,d){if(Array.isArray(b))return b.forEach(function(b){this.term(b,a.utils.clone(d))},this),this;var c=d||{};return c.term=b.toString(),this.clause(c),this},a.QueryParseError=function(a,b,c){this.name="QueryParseError",this.message=a,this.start=b,this.end=c},a.QueryParseError.prototype=new Error,a.QueryLexer=function(a){this.lexemes=[],this.str=a,this.length=a.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},a.QueryLexer.prototype.run=function(){for(var b=a.QueryLexer.lexText;b;)b=b(this)},a.QueryLexer.prototype.sliceString=function(){for(var a=[],b=this.start,c=this.pos,d=0;d<this.escapeCharPositions.length;d++)c=this.escapeCharPositions[d],a.push(this.str.slice(b,c)),b=c+1;return a.push(this.str.slice(b,this.pos)),this.escapeCharPositions.length=0,a.join("")},a.QueryLexer.prototype.emit=function(a){this.lexemes.push({type:a,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},a.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},a.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return a.QueryLexer.EOS;var b=this.str.charAt(this.pos);return this.pos+=1,b},a.QueryLexer.prototype.width=function(){return this.pos-this.start},a.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},a.QueryLexer.prototype.backup=function(){this.pos-=1},a.QueryLexer.prototype.acceptDigitRun=function(){var c,b;do b=(c=this.next()).charCodeAt(0);while(b>47&&b<58)c!=a.QueryLexer.EOS&&this.backup()},a.QueryLexer.prototype.more=function(){return this.pos<this.length},a.QueryLexer.EOS="EOS",a.QueryLexer.FIELD="FIELD",a.QueryLexer.TERM="TERM",a.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",a.QueryLexer.BOOST="BOOST",a.QueryLexer.PRESENCE="PRESENCE",a.QueryLexer.lexField=function(b){return b.backup(),b.emit(a.QueryLexer.FIELD),b.ignore(),a.QueryLexer.lexText},a.QueryLexer.lexTerm=function(b){if(b.width()>1&&(b.backup(),b.emit(a.QueryLexer.TERM)),b.ignore(),b.more())return a.QueryLexer.lexText},a.QueryLexer.lexEditDistance=function(b){return b.ignore(),b.acceptDigitRun(),b.emit(a.QueryLexer.EDIT_DISTANCE),a.QueryLexer.lexText},a.QueryLexer.lexBoost=function(b){return b.ignore(),b.acceptDigitRun(),b.emit(a.QueryLexer.BOOST),a.QueryLexer.lexText},a.QueryLexer.lexEOS=function(b){b.width()>0&&b.emit(a.QueryLexer.TERM)},a.QueryLexer.termSeparator=a.tokenizer.separator,a.QueryLexer.lexText=function(b){for(;;){var c=b.next();if(c==a.QueryLexer.EOS)return a.QueryLexer.lexEOS;if(92==c.charCodeAt(0)){b.escapeCharacter();continue}if(":"==c)return a.QueryLexer.lexField;if("~"==c)return b.backup(),b.width()>0&&b.emit(a.QueryLexer.TERM),a.QueryLexer.lexEditDistance;if("^"==c)return b.backup(),b.width()>0&&b.emit(a.QueryLexer.TERM),a.QueryLexer.lexBoost;if("+"==c&&1===b.width()||"-"==c&&1===b.width())return b.emit(a.QueryLexer.PRESENCE),a.QueryLexer.lexText;if(c.match(a.QueryLexer.termSeparator))return a.QueryLexer.lexTerm}},a.QueryParser=function(b,c){this.lexer=new a.QueryLexer(b),this.query=c,this.currentClause={},this.lexemeIdx=0},a.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var b=a.QueryParser.parseClause;b;)b=b(this);return this.query},a.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},a.QueryParser.prototype.consumeLexeme=function(){var a=this.peekLexeme();return this.lexemeIdx+=1,a},a.QueryParser.prototype.nextClause=function(){var a=this.currentClause;this.query.clause(a),this.currentClause={}},a.QueryParser.parseClause=function(d){var b=d.peekLexeme();if(void 0!=b)switch(b.type){case a.QueryLexer.PRESENCE:return a.QueryParser.parsePresence;case a.QueryLexer.FIELD:return a.QueryParser.parseField;case a.QueryLexer.TERM:return a.QueryParser.parseTerm;default:var c="expected either a field or a term, found "+b.type;throw b.str.length>=1&&(c+=" with value '"+b.str+"'"),new a.QueryParseError(c,b.start,b.end)}},a.QueryParser.parsePresence=function(e){var b=e.consumeLexeme();if(void 0!=b){switch(b.str){case"-":e.currentClause.presence=a.Query.presence.PROHIBITED;break;case"+":e.currentClause.presence=a.Query.presence.REQUIRED;break;default:var c="unrecognised presence operator'"+b.str+"'";throw new a.QueryParseError(c,b.start,b.end)}var d=e.peekLexeme();if(void 0==d){var c="expecting term or field, found nothing";throw new a.QueryParseError(c,b.start,b.end)}switch(d.type){case a.QueryLexer.FIELD:return a.QueryParser.parseField;case a.QueryLexer.TERM:return a.QueryParser.parseTerm;default:var c="expecting term or field, found '"+d.type+"'";throw new a.QueryParseError(c,d.start,d.end)}}},a.QueryParser.parseField=function(c){var b=c.consumeLexeme();if(void 0!=b){if(-1==c.query.allFields.indexOf(b.str)){var f=c.query.allFields.map(function(a){return"'"+a+"'"}).join(", "),d="unrecognised field '"+b.str+"', possible fields: "+f;throw new a.QueryParseError(d,b.start,b.end)}c.currentClause.fields=[b.str];var e=c.peekLexeme();if(void 0==e){var d="expecting term, found nothing";throw new a.QueryParseError(d,b.start,b.end)}if(e.type===a.QueryLexer.TERM)return a.QueryParser.parseTerm;var d="expecting term, found '"+e.type+"'";throw new a.QueryParseError(d,e.start,e.end)}},a.QueryParser.parseTerm=function(b){var d=b.consumeLexeme();if(void 0!=d){b.currentClause.term=d.str.toLowerCase(),-1!=d.str.indexOf("*")&&(b.currentClause.usePipeline=!1);var c=b.peekLexeme();if(void 0==c){b.nextClause();return}switch(c.type){case a.QueryLexer.TERM:return b.nextClause(),a.QueryParser.parseTerm;case a.QueryLexer.FIELD:return b.nextClause(),a.QueryParser.parseField;case a.QueryLexer.EDIT_DISTANCE:return a.QueryParser.parseEditDistance;case a.QueryLexer.BOOST:return a.QueryParser.parseBoost;case a.QueryLexer.PRESENCE:return b.nextClause(),a.QueryParser.parsePresence;default:var e="Unexpected lexeme type '"+c.type+"'";throw new a.QueryParseError(e,c.start,c.end)}}},a.QueryParser.parseEditDistance=function(b){var d=b.consumeLexeme();if(void 0!=d){var f=parseInt(d.str,10);if(isNaN(f)){var e="edit distance must be numeric";throw new a.QueryParseError(e,d.start,d.end)}b.currentClause.editDistance=f;var c=b.peekLexeme();if(void 0==c){b.nextClause();return}switch(c.type){case a.QueryLexer.TERM:return b.nextClause(),a.QueryParser.parseTerm;case a.QueryLexer.FIELD:return b.nextClause(),a.QueryParser.parseField;case a.QueryLexer.EDIT_DISTANCE:return a.QueryParser.parseEditDistance;case a.QueryLexer.BOOST:return a.QueryParser.parseBoost;case a.QueryLexer.PRESENCE:return b.nextClause(),a.QueryParser.parsePresence;default:var e="Unexpected lexeme type '"+c.type+"'";throw new a.QueryParseError(e,c.start,c.end)}}},a.QueryParser.parseBoost=function(b){var d=b.consumeLexeme();if(void 0!=d){var f=parseInt(d.str,10);if(isNaN(f)){var e="boost must be numeric";throw new a.QueryParseError(e,d.start,d.end)}b.currentClause.boost=f;var c=b.peekLexeme();if(void 0==c){b.nextClause();return}switch(c.type){case a.QueryLexer.TERM:return b.nextClause(),a.QueryParser.parseTerm;case a.QueryLexer.FIELD:return b.nextClause(),a.QueryParser.parseField;case a.QueryLexer.EDIT_DISTANCE:return a.QueryParser.parseEditDistance;case a.QueryLexer.BOOST:return a.QueryParser.parseBoost;case a.QueryLexer.PRESENCE:return b.nextClause(),a.QueryParser.parsePresence;default:var e="Unexpected lexeme type '"+c.type+"'";throw new a.QueryParseError(e,c.start,c.end)}}},function(b,a){"function"==typeof define&&define.amd?define(a):"object"==typeof exports?module.exports=a():b.lunr=a()}(this,function(){return a})}()